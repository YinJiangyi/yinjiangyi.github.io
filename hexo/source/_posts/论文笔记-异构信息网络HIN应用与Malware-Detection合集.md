---
title: 论文笔记-异构信息网络HIN应用与Malware Detection合集
typora-root-url: ../../source
date: 2021-07-07 14:50:41
tags: 
- HIN
- Malware
categories: 论文
sticky:
---

## 系列一

### HinDroid 2017, KDDSIG

整体思路，很常规也简单（可能因为提出比较早所以比较有意义）。大致过程就是从app代码中提取关系信息，基于API调用关系构造包含两种节点类型（app-api）和多种边类型的HIN。然后采用Multi kernel Learning方法对不同元路径的权重进行自动化学习。

直觉：

>- Though it may be **common to use them individually** in benign apps, they **three together in the same method **of the converted smali code **rarely appear in benign files**. 
>
>  ==随手想法==  这个部分其实比较像基于nlp方法进行知识图谱构造环节的工作，我们是不是可以想想怎么处理block级别的traffic提取有效信息（被动的混杂流量比较麻烦，也可以是主动访问的流量）。现在是通过session级别的关系构造，能不能做log/block级别的关系构造，单独把这一块拉出来作为一个工作来做。问题是可行吗？如果想获取关系信息的话，出入口的被动流量好像也不可以，因为观测位置都是一个点，没办法提取服务之间的调用关系信息，是不是只能主动访问的方式去获取。

#### 方法

**1. 架构图**

<img src="/images/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-%E5%BC%82%E6%9E%84%E4%BF%A1%E6%81%AF%E7%BD%91%E7%BB%9CHIN%E5%BA%94%E7%94%A8%E4%B8%8EMalware-Detection%E5%90%88%E9%9B%86/image-20210707152052862.png" alt="image-20210707152052862" style="zoom: 33%;" />

首先对app安装包进行解压，然后反编译为Smali代码的过程是采用工具APKTool实现的。从smali代码中提取api调用信息：

<img src="/images/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-%E5%BC%82%E6%9E%84%E4%BF%A1%E6%81%AF%E7%BD%91%E7%BB%9CHIN%E5%BA%94%E7%94%A8%E4%B8%8EMalware-Detection%E5%90%88%E9%9B%86/image-20210707152505614.png" alt="image-20210707152505614" style="zoom: 33%;" />

```
Ljava/lang/Runtime; → getRuntime() Ljava/lang/Runtime
Ljava/lang/Runtime; → exec (Ljava/lang/String;) Ljava/lang/Process
Ljava/lang/Process; → getInputStream() Ljava/io/InputStream
```

**2. HIN构造**

**节点类型**：APP; API

**关系类型**：
	co-exist in the same method
	co-appear in the same package
	two API calls using the same invoke method 
	app contains API

**metapath类型**：

<img src="/images/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-%E5%BC%82%E6%9E%84%E4%BF%A1%E6%81%AF%E7%BD%91%E7%BB%9CHIN%E5%BA%94%E7%94%A8%E4%B8%8EMalware-Detection%E5%90%88%E9%9B%86/image-20210707160356682.png" alt="image-20210707160356682" style="zoom:25%;" />

#### 3. 数据集

- Comodo Cloud Security Center

  1,834 training Android apps (920 of them are benign apps, while the other 914 apps are malware including the families of Lotoor, RevMob, Fakegupdt, and GhostPush, etc), and 500 testing samples (with the analysis by the anti-malware experts of Comodo Security Lab, 198 of them are labeled as benign and 302 of them are labeled as malicious).

- 30,000 Android apps obtained within one month (Januray 2017), half of which are benign apps and the half are malicious apps. 

#### 4. 多核SVM方法训练节点向量

这里记一下看一次忘一次的SVM中几何间隔和函数间隔的区别，为什么目标函数中几何向量可以直接取1？

> 训练目标是求分类超平面，本质上是要最大化几何间隔，函数间隔只是用来表示的一个符号而已，物理上在这个问题中没有实际意义。w和b只要成比例的扩大，这个表征是就会变大，但是实际上集合间隔没有变化。所以单纯的函数间隔变大（没有其他变化）的迭代计算是没有意义的，所以把函数间隔作为定值固定下来，方便迭代计算的过程（相当于把一些可能存在的w和b成比例增加的迭代过程过滤掉了而已）。那么既然是定值，是1还是别的什么符号就无所谓了。

#### 5. 问题

- 数据集规模小
- 没有提HIN规模

### AiDroid 2019, IJCAI

主要创新点：

克服基于HIN的节点表达的业务应用的弊端，有集成在网络中的节点才能获得向量表示。所以实际应用时，无法对新来的标签节点进行判定，重新训练的成本太高，所以部署上线不可行。

这篇文章提出的方法是，新来的节点（out-of-sample）的向量表达，通过整合训练好的in-sample邻居节点的表达来表示。整合方式也是简单的拼接。整个架构流程是：

HIN构造->in-sample节点表达学习（HIN2Img）-> 完整的节点表达计算 -> DNN模型训练

<img src="/images/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-%E5%BC%82%E6%9E%84%E4%BF%A1%E6%81%AF%E7%BD%91%E7%BB%9CHIN%E5%BA%94%E7%94%A8%E4%B8%8EMalware-Detection%E5%90%88%E9%9B%86/image-20210709100557630.png" alt="image-20210709100557630" style="zoom: 33%;" />

<img src="/images/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-%E5%BC%82%E6%9E%84%E4%BF%A1%E6%81%AF%E7%BD%91%E7%BB%9CHIN%E5%BA%94%E7%94%A8%E4%B8%8EMalware-Detection%E5%90%88%E9%9B%86/image-20210709100719070.png" alt="image-20210709100719070" style="zoom:25%;" />

另外，随机游走生成path的过程和metapath2vec相比区别在于，将多条metapath整合到一起进行游走，原metapath2vec是把所有metapath分开处理。

### αCyber, 2019 CIKM B

